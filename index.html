<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTM Alpha Consultation - Shashwat Ghosh</title>
    <meta name="description" content="Get expert Go-To-Market strategy analysis using Shashwat Ghosh's proven GTM Alpha methodology and EPIC framework">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #FF6B35 0%, #FF8A65 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(255,107,53,0.2); overflow: hidden; }
        .header { background: linear-gradient(135deg, #2C3E50 0%, #34495E 100%); color: white; padding: 40px; text-align: center; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .header p { font-size: 1.2rem; opacity: 0.9; margin-bottom: 20px; }
        .badge { background: #FF6B35; color: white; padding: 8px 20px; border-radius: 25px; font-size: 14px; font-weight: 600; display: inline-block; }
        .form-container { padding: 40px; }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 8px; color: #2C3E50; font-weight: 600; font-size: 16px; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 15px; border: 2px solid #E8E8E8; border-radius: 10px; font-size: 16px; transition: all 0.3s ease; font-family: inherit; }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus { outline: none; border-color: #FF6B35; box-shadow: 0 0 0 3px rgba(255,107,53,0.1); }
        .form-group textarea { resize: vertical; min-height: 120px; }
        .checkbox-group { display: flex; align-items: center; margin-bottom: 30px; }
        .checkbox-group input[type="checkbox"] { width: auto; margin-right: 12px; transform: scale(1.3); accent-color: #FF6B35; }
        .checkbox-group label { margin-bottom: 0; cursor: pointer; color: #2C3E50; }
        .submit-btn { width: 100%; background: linear-gradient(135deg, #FF6B35 0%, #FF8A65 100%); color: white; padding: 20px; border: none; border-radius: 12px; font-size: 18px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 5px 20px rgba(255,107,53,0.3); }
        .submit-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(255,107,53,0.4); }
        .submit-btn:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }
        .loading { display: none; text-align: center; margin-top: 30px; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #FF6B35; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .success { display: none; background: linear-gradient(135deg, #27AE60 0%, #2ECC71 100%); color: white; padding: 30px; border-radius: 15px; margin-top: 30px; text-align: center; }
        .success h3 { margin-bottom: 15px; font-size: 1.5rem; }
        .success a { color: white; text-decoration: none; background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 8px; display: inline-block; font-size: 16px; font-weight: 600; margin: 10px; transition: all 0.3s ease; }
        .success a:hover { background: rgba(255,255,255,0.3); transform: translateY(-2px); }
        .error { display: none; background: linear-gradient(135deg, #E74C3C 0%, #C0392B 100%); color: white; padding: 30px; border-radius: 15px; margin-top: 30px; text-align: center; }
        .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .feature { background: #F8F9FA; padding: 20px; border-radius: 12px; text-align: center; }
        .feature h4 { color: #2C3E50; margin-bottom: 10px; }
        .feature p { color: #7F8C8D; font-size: 14px; }
        .footer { background: #2C3E50; color: white; padding: 20px; text-align: center; font-size: 14px; }
        .footer a { color: #FF6B35; text-decoration: none; }
        .version { position: fixed; top: 10px; right: 10px; background: #28a745; color: white; padding: 5px 10px; border-radius: 5px; font-size: 12px; z-index: 1000; }
        .api-status { margin: 20px 0; padding: 15px; border-radius: 8px; text-align: center; font-size: 14px; }
        .api-status.checking { background: #fff3cd; color: #856404; }
        .api-status.connected { background: #d4edda; color: #155724; }
        .api-status.error { background: #f8d7da; color: #721c24; }
        .progress-bar { width: 100%; height: 6px; background: #f3f3f3; border-radius: 3px; overflow: hidden; margin: 15px 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #FF6B35, #FF8A65); transition: width 0.3s ease; }
        .deploy-notice { background: #e3f2fd; border: 2px solid #2196f3; border-radius: 10px; padding: 20px; margin: 20px 0; text-align: center; }
        .deploy-button { background: #6f42c1; color: white; padding: 15px 30px; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; text-decoration: none; display: inline-block; margin: 10px; transition: all 0.3s ease; }
        .deploy-button:hover { background: #5a32a3; transform: translateY(-2px); }
    </style>
</head>
<body>
    <div class="version">v7.0 - Heroku Ready</div>
    
    <div class="container">
        <div class="header">
            <h1>üéØ GTM Alpha Consultation</h1>
            <p>Get expert Go-To-Market strategy using Shashwat Ghosh's proven methodology</p>
            <div class="badge">‚úÖ FREE Analysis</div>
        </div>
        
        <div class="form-container">
            <!-- Deployment Notice -->
            <div class="deploy-notice">
                <h3>üöÄ Ready for Deployment!</h3>
                <p>Backend service is configured for Heroku. Click the button below to deploy:</p>
                <a href="https://heroku.com/deploy?template=https://github.com/shashwatgtm/gtm-alpha-backend" 
                   class="deploy-button" target="_blank">
                   Deploy to Heroku
                </a>
                <p style="font-size: 14px; margin-top: 10px; color: #666;">
                    After deployment, the form will automatically connect to your backend service.
                </p>
            </div>

            <!-- API Status Check -->
            <div id="apiStatus" class="api-status checking">
                üîç Connecting to backend service...
            </div>

            <div class="features">
                <div class="feature">
                    <h4>üî• GTM Alpha Methodology</h4>
                    <p>Dynamic operating system approach, not static planning</p>
                </div>
                <div class="feature">
                    <h4>‚ö° EPIC Framework</h4>
                    <p>Ecosystem, Product-led, Inbound/Outbound, Community analysis</p>
                </div>
                <div class="feature">
                    <h4>üõ†Ô∏è Implementation Roadmap</h4>
                    <p>30-60-90 day action plan with success metrics</p>
                </div>
            </div>
            
            <form id="gtmForm">
                <div class="form-group">
                    <label for="client_name">üë§ Your Name *</label>
                    <input type="text" id="client_name" name="client_name" required 
                           placeholder="Your full name for the consultation report">
                </div>
                
                <div class="form-group">
                    <label for="client_designation">üíº Your Title/Designation</label>
                    <input type="text" id="client_designation" name="client_designation" 
                           placeholder="e.g., CEO, CMO, VP Marketing">
                </div>
                
                <div class="form-group">
                    <label for="company_name">üè¢ Company Name *</label>
                    <input type="text" id="company_name" name="company_name" required 
                           placeholder="Your company or organization name">
                </div>
                
                <div class="form-group">
                    <label for="company_description">üìù Company & Product Description</label>
                    <textarea id="company_description" name="company_description" 
                              placeholder="Brief description of your company, product, or service (2-3 sentences)"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="gtm_challenge">üéØ GTM Challenge & Objectives *</label>
                    <textarea id="gtm_challenge" name="gtm_challenge" required 
                              placeholder="Describe your specific GTM challenge, question, or objectives in detail">We're a B2B SaaS company struggling with enterprise customer acquisition. Our PLG motion works for SMBs but we can't crack the enterprise market. Sales cycle is too long and we lack proper reference customers for big deals.</textarea>
                </div>
                
                <div class="form-group">
                    <label for="business_stage">üìà Business Stage *</label>
                    <select id="business_stage" name="business_stage" required>
                        <option value="">Select Business Stage</option>
                        <option value="bootstrapped-idea">ü•æ Bootstrapped: 0-1 (Idea Stage)</option>
                        <option value="bootstrapped-pmf" selected>ü•æ Bootstrapped: Pre-Seed - Product Market Fit (PMF) done</option>
                        <option value="bootstrapped-seed-equivalent">ü•æ Bootstrapped: Seed Stage equivalent</option>
                        <option value="bootstrapped-series-equivalent">ü•æ Bootstrapped: Series A/B/C equivalent</option>
                        <option value="bootstrapped-ipo-equivalent">ü•æ Bootstrapped: IPO Stage equivalent</option>
                        <option value="venture-pre-seed">üí∞ Venture-Funded: Pre-Seed</option>
                        <option value="venture-seed">üí∞ Venture-Funded: Seed Stage</option>
                        <option value="venture-series-a">üí∞ Venture-Funded: Series A</option>
                        <option value="venture-series-b">üí∞ Venture-Funded: Series B</option>
                        <option value="venture-series-c">üí∞ Venture-Funded: Series C</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="industry">üè≠ Industry Sector</label>
                    <input type="text" id="industry" name="industry" 
                           placeholder="e.g., Technology, Healthcare, Fintech">
                </div>
                
                <div class="form-group">
                    <label for="current_team_size">üë• Current Team Size</label>
                    <select id="current_team_size" name="current_team_size">
                        <option value="">Select Team Size</option>
                        <option value="1-5">1-5 (Small Team)</option>
                        <option value="6-15">6-15 (Growing Team)</option>
                        <option value="16-50">16-50 (Medium Team)</option>
                        <option value="51-200">51-200 (Large Team)</option>
                        <option value="200+">200+ (Enterprise Team)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="budget_range">üí∞ Monthly Marketing Budget Range</label>
                    <select id="budget_range" name="budget_range">
                        <option value="">Select Budget Range</option>
                        <option value="<$10K">Under $10K</option>
                        <option value="$10K-$50K">$10K - $50K</option>
                        <option value="$50K-$200K">$50K - $200K</option>
                        <option value="$200K-$500K">$200K - $500K</option>
                        <option value="$500K+">Over $500K</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="specific_focus">üîç Specific Focus Areas (Optional)</label>
                    <textarea id="specific_focus" name="specific_focus" 
                              placeholder="Any specific areas you want the consultation to focus on (e.g., pricing, positioning, channels)"></textarea>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="confirm_new_consultation" name="confirm_new_consultation" required>
                    <label for="confirm_new_consultation">‚úÖ Confirm New Consultation - Check this box to confirm you want a NEW consultation analysis</label>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">
                    üöÄ Generate GTM Alpha Audit Report
                </button>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <h3 id="loadingTitle">üéØ Generating Your GTM Alpha Audit...</h3>
                    <p id="loadingMessage">This typically takes 2-3 minutes to complete.</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <div id="progressText">Preparing consultation data...</div>
                </div>
                
                <div class="success" id="success">
                    <h3>üéâ Your GTM Alpha Audit is Ready!</h3>
                    <p id="successMessage"></p>
                </div>
                
                <div class="error" id="error">
                    <h3>‚ùå Unable to Generate GTM Alpha Audit</h3>
                    <p id="errorMessage">Please try again or contact support.</p>
                </div>
            </form>
        </div>

        <div class="footer">
            <p>Created by <a href="https://gtmexpert.com/contact-shashwat-ghosh" target="_blank">Shashwat Ghosh</a> | 
            Powered by <a href="https://apify.com/shashghosh/gtm-alpha-consultant" target="_blank">GTM Alpha Consultant</a></p>
        </div>
    </div>

    <script>
        // PRODUCTION BACKEND URL - Heroku deployment
        const BACKEND_URL = 'https://gtm-alpha-backend.herokuapp.com';
        
        console.log('GTM Form v7.0 - Heroku Ready - Loaded at:', new Date().toISOString());
        
        // Check backend connection on load
        window.addEventListener('load', async function() {
            await checkBackendStatus();
            
            // Auto-fill demo data if requested
            if (window.location.search.includes('demo=1')) {
                document.getElementById('client_name').value = 'Nitin Prakash';
                document.getElementById('client_designation').value = 'Founder';
                document.getElementById('company_name').value = 'Kamlesh Bhai and Sons';
                document.getElementById('company_description').value = 'We are a traditional business looking to modernize our go-to-market approach with digital transformation.';
                document.getElementById('gtm_challenge').value = 'We\'re a B2B SaaS company struggling with enterprise customer acquisition. Our PLG motion works for SMBs but we can\'t crack the enterprise market. Sales cycle is too long and we lack proper reference customers for big deals.';
                document.getElementById('business_stage').value = 'bootstrapped-seed-equivalent';
                document.getElementById('industry').value = 'Technology';
                document.getElementById('current_team_size').value = '6-15';
                document.getElementById('budget_range').value = '<$10K';
                document.getElementById('specific_focus').value = 'Pipeline is low and unqualified leads are wasting too much time. Unable to scale due to such wastage. Too many demos but very little conversion';
                document.getElementById('confirm_new_consultation').checked = true;
            }
        });

        async function checkBackendStatus() {
            const statusEl = document.getElementById('apiStatus');
            
            try {
                const response = await fetch(`${BACKEND_URL}/health`, {
                    method: 'GET',
                    mode: 'cors'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    statusEl.className = 'api-status connected';
                    statusEl.innerHTML = '‚úÖ Backend connected - Ready for GTM consultations';
                    console.log('Backend health check passed:', data);
                    
                    // Hide deploy notice if backend is connected
                    const deployNotice = document.querySelector('.deploy-notice');
                    if (deployNotice) {
                        deployNotice.style.display = 'none';
                    }
                } else {
                    throw new Error(`Backend responded with ${response.status}`);
                }
            } catch (error) {
                console.error('Backend health check failed:', error);
                statusEl.className = 'api-status error';
                statusEl.innerHTML = '‚ùå Backend not deployed yet - Click "Deploy to Heroku" button above';
            }
        }
        
        document.getElementById('gtmForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            console.log('Form submitted - calling backend service');
            
            const submitBtn = document.getElementById('submitBtn');
            const loading = document.getElementById('loading');
            const success = document.getElementById('success');
            const error = document.getElementById('error');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // Hide previous messages
            success.style.display = 'none';
            error.style.display = 'none';
            
            // Show loading with progress
            submitBtn.style.display = 'none';
            loading.style.display = 'block';
            startProgressAnimation();
            
            // Collect form data exactly as per Apify actor schema
            const formData = new FormData(this);
            const inputData = {
                client_name: formData.get('client_name'),
                client_designation: formData.get('client_designation') || '',
                company_name: formData.get('company_name'),
                company_description: formData.get('company_description') || '',
                gtm_challenge: formData.get('gtm_challenge'),
                business_stage: formData.get('business_stage'),
                industry: formData.get('industry') || '',
                current_team_size: formData.get('current_team_size') || '',
                budget_range: formData.get('budget_range') || '',
                specific_focus: formData.get('specific_focus') || '',
                confirm_new_consultation: formData.has('confirm_new_consultation')
            };
            
            console.log('Sending GTM consultation request:', inputData);
            
            try {
                // Call backend API
                const response = await fetch(`${BACKEND_URL}/api/gtm-consultation`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    mode: 'cors',
                    body: JSON.stringify(inputData)
                });
                
                const result = await response.json();
                console.log('Backend response:', result);
                
                if (response.ok && result.success) {
                    // Success!
                    loading.style.display = 'none';
                    success.style.display = 'block';
                    
                    successMessage.innerHTML = `
                        <div style="margin: 20px 0;">
                            <h4 style="color: white; margin-bottom: 15px;">üéâ GTM Alpha Audit Complete for ${inputData.client_name}!</h4>
                            <p style="margin-bottom: 20px;">Your personalized GTM Alpha consultation has been successfully generated for ${inputData.company_name}.</p>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; margin: 20px 0; text-align: left;">
                            <h5 style="color: white; margin-bottom: 10px;">üìä Consultation Results:</h5>
                            <div style="font-size: 14px; line-height: 1.8;">
                                <strong>Run ID:</strong> ${result.runId}<br>
                                <strong>Status:</strong> ${result.status}<br>
                                <strong>Duration:</strong> ${Math.round(result.duration / 1000)} seconds<br>
                                <strong>Generated:</strong> ${new Date(result.timestamp).toLocaleString()}
                            </div>
                        </div>
                        
                        <div style="margin: 20px 0;">
                            ${result.reportUrl ? `
                                <a href="${result.reportUrl}" target="_blank" style="color: white; text-decoration: none; background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 8px; display: inline-block; font-size: 16px; font-weight: 600; margin: 5px;">
                                    üìÑ View HTML Report ‚Üí
                                </a>
                            ` : ''}
                            <a href="${result.consoleUrl}" target="_blank" style="color: white; text-decoration: none; background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 8px; display: inline-block; font-size: 16px; font-weight: 600; margin: 5px;">
                                üîß View Run Details ‚Üí
                            </a>
                            <a href="https://calendly.com/shashwat-gtmhelix/45min" target="_blank" style="color: white; text-decoration: none; background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 8px; display: inline-block; font-size: 16px; font-weight: 600; margin: 5px;">
                                üìÖ Book Follow-up ‚Üí
                            </a>
                        </div>
                        
                        <p style="margin-top: 15px; font-size: 14px; opacity: 0.9;">
                            ‚úÖ Professional analysis ‚Ä¢ ‚ö° EPIC Framework ‚Ä¢ üõ†Ô∏è 90-day roadmap ‚Ä¢ üéØ Personalized for ${inputData.business_stage}
                        </p>
                    `;
                    
                    // Auto-open report if available
                    if (result.reportUrl) {
                        setTimeout(() => {
                            window.open(result.reportUrl, '_blank');
                        }, 2000);
                    }
                    
                } else {
                    // Error from backend
                    throw new Error(result.message || 'GTM consultation failed');
                }
                
                this.reset();
                
            } catch (err) {
                console.error('Error calling backend:', err);
                
                loading.style.display = 'none';
                error.style.display = 'block';
                submitBtn.style.display = 'block';
                
                // Handle specific error types
                if (err.message.includes('UNDER_MAINTENANCE')) {
                    errorMessage.innerHTML = `
                        <p><strong>Service Temporarily Unavailable</strong></p>
                        <p>The GTM Alpha Consultant is currently under maintenance. Please try again later.</p>
                        <p style="margin-top: 15px;">
                            <a href="https://calendly.com/shashwat-gtmhelix/45min" target="_blank" style="color: white; text-decoration: underline;">
                                üìÖ Schedule a personal consultation instead ‚Üí
                            </a>
                        </p>
                    `;
                } else if (err.message.includes('Failed to fetch') || err.message.includes('Backend not available')) {
                    // Instructions for backend deployment
                    errorMessage.innerHTML = `
                        <p><strong>Backend Service Required</strong></p>
                        <p>Deploy the backend service using the "Deploy to Heroku" button above.</p>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 15px 0; text-align: left;">
                            <strong>Quick Deploy Steps:</strong><br>
                            1. Click "Deploy to Heroku" button above<br>
                            2. Create Heroku account if needed<br>
                            3. Click "Deploy app"<br>
                            4. Wait for deployment to complete<br>
                            5. Try submitting the form again<br><br>
                            <strong>Manual fallback:</strong> <a href="https://console.apify.com/actors/shashghosh~gtm-alpha-consultant" target="_blank" style="color: white;">Use Apify Console</a>
                        </div>
                    `;
                } else {
                    errorMessage.innerHTML = `
                        <p><strong>Error:</strong> ${err.message}</p>
                        <p style="margin-top: 15px;">Please try again or contact our support team.</p>
                    `;
                }
            }
        });

        function startProgressAnimation() {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const loadingTitle = document.getElementById('loadingTitle');
            
            let progress = 0;
            const steps = [
                { progress: 10, text: 'Validating consultation data...', title: 'üîç Validating Your Request...' },
                { progress: 25, text: 'Calling GTM Alpha Consultant...', title: 'üöÄ Starting GTM Analysis...' },
                { progress: 40, text: 'Running EPIC Framework analysis...', title: '‚ö° Analyzing EPIC Framework...' },
                { progress: 60, text: 'Generating strategic recommendations...', title: 'üéØ Creating Recommendations...' },
                { progress: 80, text: 'Building implementation roadmap...', title: 'üõ†Ô∏è Building Roadmap...' },
                { progress: 95, text: 'Finalizing HTML report...', title: 'üìÑ Generating Report...' }
            ];
            
            let currentStep = 0;
            
            const interval = setInterval(() => {
                if (currentStep < steps.length) {
                    const step = steps[currentStep];
                    progressFill.style.width = step.progress + '%';
                    progressText.textContent = step.text;
                    loadingTitle.textContent = step.title;
                    currentStep++;
                } else {
                    progressFill.style.width = '100%';
                    progressText.textContent = 'Almost done...';
                    clearInterval(interval);
                }
            }, 20000); // 20 seconds per step, total ~2.5 minutes
        }
    </script>
</body>
</html>